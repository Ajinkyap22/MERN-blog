(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t){},137:function(e,t,s){},138:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),c=s(58),o=s.n(c),r=s(10),i=s(3),l=(s(67),s(6)),d=s(5),u=s.p+"static/media/logo.0dc6fb97.png",b=s(0);var j=Object(d.f)((function(e){return Object(b.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark fixed-top",children:Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsxs)(l.c,{exact:!0,to:"/",className:"navbar-brand px-3",children:[Object(b.jsx)("img",{src:u,className:"logo m-2",alt:""}),Object(b.jsx)("span",{className:"h4 fw-bold",children:"Blogify"})]}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsx)("div",{className:"collapse navbar-collapse justify-content-end px-3",id:"navbarNavAltMarkup",children:Object(b.jsxs)("div",{className:"navbar-nav text-center align-items-center",children:[Object(b.jsx)(l.c,{exact:!0,to:"/",activeClassName:"active fw-bold letter-spacing",className:"nav-link mx-2 text-white","aria-current":"page",hidden:!e.user,children:"Home"}),Object(b.jsx)(l.c,{exact:!0,to:"/dashboard",activeClassName:"active fw-bold letter-spacing",className:"nav-link text-white","aria-current":"page",hidden:!e.user,children:"Dashboard"}),Object(b.jsx)(l.c,{exact:!0,to:"/login",className:"btn btn-light fw-bold rounded-pill m-2 ",hidden:!!e.user,children:"Login"}),Object(b.jsx)(l.c,{exact:!0,to:"/signup",className:"btn btn-light fw-bold rounded-pill m-2 ",hidden:!!e.user,children:"Signup"}),Object(b.jsx)(l.c,{exact:!0,to:"/create",activeClassName:"active",className:"btn btn-light fw-bold rounded-pill m-2",hidden:!e.user,children:"Create Post"}),Object(b.jsx)(l.c,{exact:!0,to:"/",activeClassName:"active",className:"btn btn-light fw-bold rounded-pill m-2",hidden:!e.user,onClick:function(t){localStorage.removeItem("user"),e.setUser(void 0)},children:"Logout"})]})})]})})})),h=s(17),m=s(22),p=s(4),x=s.n(p),f=s(23),O=s.n(f),g=s(24),v=s.n(g);var N=Object(d.f)((function(e){var t=Object(a.useState)(""),s=Object(i.a)(t,2),n=s[0],c=s[1],o=Object(a.useState)(""),r=Object(i.a)(o,2),d=r[0],j=r[1],p=Object(a.useState)(""),f=Object(i.a)(p,2),g=f[0],N=f[1];Object(a.useEffect)((function(){document.title=e.title||"Login | Blogify"}),[e.title]);var w=function(){var t=Object(m.a)(Object(h.a)().mark((function t(s){var a,n;return Object(h.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=JSON.stringify({token:s.tokenId}),n={headers:{"Content-Type":"application/json"}},x.a.post("/api/users/google",a,n).then((function(t){localStorage.setItem("user",JSON.stringify(t.data)),e.setUser(t.data.user),e.history.push("/")})).catch((function(e){401===e.response.status?N(e.response.data.message):console.error(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)("main",{className:"container-fluid d-flex flex-column justify-content-center align-items-center h-100 pt-5 mt-5",children:[Object(b.jsxs)("p",{className:"text-center pb-3 display-6 fw-bold",children:[Object(b.jsx)("img",{src:u,className:"logo-title mx-1 mb-1",alt:""})," Blogify"]}),Object(b.jsxs)("div",{className:"bg-white w-50 auth shadow p-3",children:[Object(b.jsxs)("div",{className:"text-center",children:[Object(b.jsx)("h1",{children:"Login"}),Object(b.jsxs)("p",{children:["Not a member?"," ",Object(b.jsx)(l.b,{to:"/signup",className:"link-primary text-decoration-none",children:"Sign up"})]})]}),Object(b.jsxs)("p",{hidden:!g,className:"text-danger fw-bold",children:["\u26a0 ",g]}),Object(b.jsx)(O.a,{clientId:"228256763363-sd6as8dknr2ij5sab8gt51s4f6p49ubt.apps.googleusercontent.com",render:function(e){return Object(b.jsx)(v.a,{type:"light",onClick:e.onClick,disabled:e.disabled,className:"m-auto fw-bold",children:"Sign in with Google"})},buttonText:"Sign in with Google",onSuccess:w,onFailure:w,cookiePolicy:"single_host_origin"}),Object(b.jsx)("p",{className:"text-center pt-2",children:"OR"}),Object(b.jsx)("hr",{}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),x.a.post("/api/users/login",{username:n,password:d}).then((function(t){localStorage.setItem("user",JSON.stringify(t.data)),e.setUser(t.data.user),e.history.push("/")})).catch((function(e){401===e.response.status?N(e.response.data.message):console.error(e)}))},children:[Object(b.jsxs)("div",{className:"form-group pb-2",children:[Object(b.jsxs)("label",{htmlFor:"username",className:"fw-bold py-2",children:["Username",Object(b.jsx)("span",{className:"text-danger",children:" *"})]}),Object(b.jsx)("input",{type:"text",name:"username",className:"form-control",onChange:function(e){return c(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-group py-2",children:[Object(b.jsxs)("label",{htmlFor:"password",className:"fw-bold py-2",children:["Password",Object(b.jsx)("span",{className:"text-danger",children:" *"})]}),Object(b.jsx)("input",{type:"password",name:"password",className:"form-control",onChange:function(e){return j(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"py-3",children:[Object(b.jsx)("button",{className:"btn btn-dark fw-bold letter-spacing mr-2",type:"submit",children:"Login"}),Object(b.jsx)("a",{href:"/",className:"text-secondary text-decoration-none mx-2 px-2",children:"Go Back"})]})]})]})]})}));var w=Object(d.f)((function(e){var t=Object(a.useState)(""),s=Object(i.a)(t,2),n=s[0],c=s[1],o=Object(a.useState)(""),r=Object(i.a)(o,2),d=r[0],j=r[1],p=Object(a.useState)(""),f=Object(i.a)(p,2),g=f[0],N=f[1],w=Object(a.useState)(""),y=Object(i.a)(w,2),S=y[0],T=y[1];Object(a.useEffect)((function(){document.title=e.title||"Sign up | Blogify"}),[e.title]);var k=function(){var t=Object(m.a)(Object(h.a)().mark((function t(s){var a,n;return Object(h.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=JSON.stringify({token:s.tokenId}),n={headers:{"Content-Type":"application/json"}},x.a.post("/api/users/google",a,n).then((function(t){localStorage.setItem("user",JSON.stringify(t.data)),e.setUser(t.data.user),e.history.push("/")})).catch((function(e){var t;401===(null===(t=e.response)||void 0===t?void 0:t.status)?T(e.response.data.message):console.error(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)("main",{className:"container-fluid d-flex flex-column justify-content-center align-items-center h-100 mt-5",children:[Object(b.jsxs)("p",{className:"text-center mt-5 display-6 fw-bold",children:[Object(b.jsx)("img",{src:u,className:"logo-title mx-1 mb-1",alt:""})," Blogify"]}),Object(b.jsxs)("div",{className:"bg-white w-50 auth shadow p-3 py-2",children:[Object(b.jsxs)("div",{className:"text-center",children:[Object(b.jsx)("h1",{className:"text-center",children:"Sign Up"}),Object(b.jsxs)("p",{children:["Already a member?"," ",Object(b.jsx)(l.b,{to:"/login",className:"link-primary text-decoration-none",children:"Login"})]})]}),Object(b.jsxs)("p",{hidden:!S,className:"text-danger fw-bold",children:["\u26a0 ",S]}),Object(b.jsx)(O.a,{clientId:"508773087854-ntd2udfm7p2n4hcm02i62b3a2832qi9b.apps.googleusercontent.com",render:function(e){return Object(b.jsx)(v.a,{type:"light",onClick:e.onClick,disabled:e.disabled,className:"m-auto fw-bold",children:"Sign in with Google"})},buttonText:"Sign in with Google",onSuccess:k,onFailure:k,cookiePolicy:"single_host_origin"}),Object(b.jsx)("p",{className:"text-center pt-2",children:"OR"}),Object(b.jsx)("hr",{}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),x.a.post("/api/users/signup",{username:n,password:d,confirmPassword:g}).then((function(){e.history.push("/login")})).catch((function(e){409===e.response.status||401===e.response.status?T(e.response.data.error):console.error(e)}))},children:[Object(b.jsxs)("div",{className:"form-group pb-2",children:[Object(b.jsxs)("label",{htmlFor:"username",className:"fw-bold py-2",children:["Username",Object(b.jsx)("span",{className:"text-danger",children:" *"})]}),Object(b.jsx)("input",{type:"text",name:"username",className:"form-control",onChange:function(e){return c(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-group py-2",children:[Object(b.jsxs)("label",{htmlFor:"password",className:"fw-bold py-2",children:["Password",Object(b.jsx)("span",{className:"text-danger",children:" *"})]}),Object(b.jsx)("input",{type:"password",name:"password",className:"form-control",onChange:function(e){return j(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-group py-2",children:[Object(b.jsxs)("label",{htmlFor:"confirmPassword",className:"fw-bold py-2",children:["Confirm Password",Object(b.jsx)("span",{className:"text-danger",children:" *"})]}),Object(b.jsx)("input",{type:"password",name:"confirmPassword",className:"form-control",onChange:function(e){return N(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"py-3",children:[Object(b.jsx)("button",{className:"btn btn-dark mr-2 fw-bold letter-spacing",type:"submit",children:"Sign up"}),Object(b.jsx)("a",{href:"/",className:"text-secondary text-decoration-none mx-2 p-2",children:"Go Back"})]})]})]})]})})),y=s(16),S=s.n(y),T=s.p+"static/media/default.91f9eebc.jpg";var k=function(e){return Object(b.jsxs)("div",{className:"text-center bg-white shadow h-100 preview",children:[Object(b.jsxs)(l.b,{exact:"true",to:"posts/".concat(e._id),className:"text-decoration-none text-dark",children:[Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:e.imgUrl||T,className:"img-fluid",alt:"Blog related"})}),Object(b.jsxs)("div",{className:"p-2",children:[Object(b.jsx)("p",{className:"fw-bold lead p-0",children:e.title}),Object(b.jsxs)("p",{className:"p-0 text-secondary",children:["By ",e.author.username," / ",S()(e.timestamp).format("lll")]})]})]}),Object(b.jsx)("button",{className:"btn btn-outline-dark mb-3 fw-bold letter-spacing",hidden:!e.publishing&&!e.unpublishing,onClick:function(){var t=e.published?"unpublish":"publish",s={headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("user")).token)}};x.a.post("/api/posts/".concat(e._id,"/").concat(t),{},s).then((function(t){e.setPosts((function(s){return s.map((function(s){return s._id===e._id?t.data:s}))}));var s=t.data.published?"Post Published Successfully":"Post Unpublished Successfully.";e.setShowToast(!0),e.setToastText(s)})).catch((function(e){console.error(e)}))},children:e.publishing?"Unublish":"Publish"})]})},C=s.p+"static/media/bulb.56f997d2.jpg";var _=function(e){var t=Object(a.useState)(!1),s=Object(i.a)(t,2),n=s[0],c=s[1],o=Object(a.useState)(!1),l=Object(i.a)(o,2),d=l[0],u=l[1];return Object(a.useEffect)((function(){e.posts.filter((function(t){return t.author._id===e.user._id&&t.published})).length?c(!0):c(!1),e.posts.filter((function(t){return t.author._id===e.user._id&&!t.published})).length?u(!0):u(!1)}),[e.posts,e.user]),Object(a.useEffect)((function(){document.title=e.title||"Dashboard | Blogify"}),[e.title]),Object(b.jsxs)("div",{className:"mt-5",children:[Object(b.jsx)("h1",{className:"pt-5 text-center fw-bold",children:"".concat(e.user.username,"'s Dashboard")}),Object(b.jsxs)("section",{className:"p-2",children:[Object(b.jsx)("h3",{children:"Published Posts"}),Object(b.jsx)("hr",{}),Object(b.jsxs)("section",{className:"text-center",hidden:!!n,children:[Object(b.jsx)("img",{src:C,className:"bulb",alt:""}),Object(b.jsx)("p",{className:"text-center p-3 lead",children:"You have no published posts."})]}),Object(b.jsx)("div",{className:"row p-3 pt-1 w-100",hidden:!n,children:e.posts.filter((function(t){return t.author._id===e.user._id&&t.published})).map((function(t){return Object(b.jsx)("div",{className:"col-12 col-md-4",children:Object(b.jsx)(k,Object(r.a)(Object(r.a)({},t),{},{publishing:!0,setPosts:e.setPosts,setShowToast:e.setShowToast,setToastText:e.setToastText}))},t._id)}))})]}),Object(b.jsxs)("section",{className:"p-2 pt-3",children:[Object(b.jsx)("h3",{children:"Unpublished Posts"}),Object(b.jsx)("hr",{}),Object(b.jsxs)("section",{className:"text-center",hidden:!!d,children:[Object(b.jsx)("img",{src:C,className:"bulb",alt:""}),Object(b.jsx)("p",{className:"text-center p-3 lead",children:"You have no unpublished posts."})]}),Object(b.jsx)("div",{className:"row p-3 pt-1 w-100",hidden:!d,children:e.posts.filter((function(t){return t.author._id===e.user._id&&!t.published})).map((function(t){return Object(b.jsx)("div",{className:"col-12 col-md-4",children:Object(b.jsx)(k,Object(r.a)(Object(r.a)({},t),{},{unpublishing:!0,setPosts:e.setPosts,posts:e.posts,setShowToast:e.setShowToast,setToastText:e.setToastText}))},t._id)}))})]})]})};var B=function(e){var t=Object(a.useState)(e.comment.content),s=Object(i.a)(t,2),n=s[0],c=s[1],o=Object(a.useState)(!1),r=Object(i.a)(o,2),l=r[0],d=r[1];return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"border p-2 my-2",hidden:!!l,children:[Object(b.jsxs)("small",{children:[e.comment.username," -",S()(e.comment.timestamp).format("lll")]}),Object(b.jsx)("p",{className:"lead fw-normal pt-2",children:e.comment.content}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("button",{className:"btn fw-bold text-primary p-1 letter-spacing",hidden:!e.user||e.user.username!==e.comment.username,onClick:function(){e.setCommentEdit(!0),d(!0)},children:[Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pencil-square me-1",viewBox:"0 0 16 17",children:[Object(b.jsx)("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),Object(b.jsx)("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"})]})," ","Edit"]}),Object(b.jsxs)("button",{className:"btn fw-bold text-danger px-2 py-1 letter-spacing",onClick:function(){x.a.delete("/api/posts/".concat(e.postId,"/comments/").concat(e.comment._id,"/delete"),{headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("user")).token)}}).then((function(){e.setComments(e.comments.filter((function(t){return t._id!==e.comment._id}))),e.setShowToast(!0),e.setToastText("Comment Deleted Successfully.")})).catch((function(e){console.error(e)}))},hidden:!e.user||e.user.username!==e.comment.username,children:[Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 17",children:[Object(b.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),Object(b.jsx)("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]})," ","Delete"]})]})]}),Object(b.jsx)("div",{hidden:!l,children:Object(b.jsxs)("form",{className:"py-2",onSubmit:function(t){t.preventDefault(),x.a.put("/api/posts/".concat(e.postId,"/comments/").concat(e.comment._id,"/edit"),{username:e.user.username,content:n},{headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("user")).token)}}).then((function(t){e.setComments(e.comments.map((function(s){return s._id!==e.comment._id?s:t.data}))),e.setCommentEdit(!1),d(!1),e.setShowToast(!0),e.setToastText("Comment Edited Successfully.")})).catch((function(e){console.error(e)}))},children:[Object(b.jsx)("div",{className:"form-group py-3",children:Object(b.jsx)("textarea",{name:"content",className:"form-control w-50",onChange:function(e){return c(e.target.value)},defaultValue:e.comment.content,required:!0})}),Object(b.jsx)("button",{className:"btn btn-dark fw-bold letter-spacing",children:"Save"})]})})]})},P=s(25);var z=function(e){var t=Object(a.useState)(""),s=Object(i.a)(t,2),n=s[0],c=s[1],o=Object(a.useState)(),r=Object(i.a)(o,2),l=r[0],d=r[1];return Object(a.useEffect)((function(){e.user&&d(e.user.username)}),[e]),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),t.target.reset();var s="/api/posts/".concat(e.id,"/comments/");x.a.post(s,{username:l,content:n}).then((function(t){e.setComments((function(e){return[].concat(Object(P.a)(e),[t.data])})),e.setShowToast(!0),e.setToastText("Comment Created Successfully.")})).catch((function(e){console.error(e)}))},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsxs)("label",{htmlFor:"username",className:"fw-bold py-2",hidden:!!e.user,children:["Username ",Object(b.jsx)("span",{className:"text-danger",children:"*"})]}),Object(b.jsx)("input",{type:e.user?"hidden":"text",className:"form-control w-25 field",name:"username",defaultValue:e.user?e.user.username:"",onChange:function(e){return d(e.target.value)},required:!0})]}),Object(b.jsx)("div",{className:"form-group py-3",children:Object(b.jsx)("textarea",{name:"content",className:"form-control",onChange:function(e){return c(e.target.value)},rows:"3",required:!0})}),Object(b.jsx)("button",{className:"btn btn-dark fw-bold letter-spacing",disabled:!n||!l,children:"Comment"})]})},E=s(26),U=s(62);var A=Object(d.f)((function(e){var t,s=Object(a.useState)({title:e.title||"",content:e.content||"",author:null===(t=e.user)||void 0===t?void 0:t._id,comments:e.comments||[],published:e.published||!0,imgUrl:e.imgUrl||""}),n=Object(i.a)(s,2),c=n[0],o=n[1],l={headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("user")).token)}};Object(a.useEffect)((function(){document.title=e.editing?"Edit Post | Blogify":"Create Post | Blogify"}),[e.editing]);var d=function(e){var t=e.target,s=t.name,a=t.value;o((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(E.a)({},s,a))}))};return Object(b.jsxs)("div",{className:"mt-5 p-3 w-75 m-auto shadow post-form",children:[Object(b.jsx)("h2",{className:"pt-4 fw-bold",children:e.editing?"Edit Blog Post":"Create Blog Post"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.editing?x.a.put("/api/posts/".concat(e.id,"/edit"),c,l).then((function(t){e.setPosts((function(s){return s.map((function(s){return e.id===s._id?t.data:s}))})),e.setEditing(!1),e.setShowToast(!0),e.setToastText("Post Edited Successfully."),e.history.push("/posts/".concat(t.data._id))})).catch((function(e){console.error(e)})):x.a.post("/api/posts/create",c,l).then((function(t){e.setPosts((function(e){return[].concat(Object(P.a)(e),[t.data])})),e.setShowToast(!0),e.setToastText("Post Created Successfully."),e.history.push("/posts/".concat(t.data._id))})).catch((function(e){console.error(e)}))},children:[Object(b.jsxs)("div",{className:"form-group py-3",children:[Object(b.jsxs)("label",{htmlFor:"title",className:"fw-bold py-2",children:["Title ",Object(b.jsx)("span",{className:"text-danger",children:"*"})]}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"title",placeholder:"Title of your blog post",onChange:d,defaultValue:c.title||""})]}),Object(b.jsxs)("div",{className:"form-group py-3",children:[Object(b.jsx)("label",{htmlFor:"imgUrl",className:"fw-bold py-2",children:"Image URL (Optional)"}),Object(b.jsx)("input",{type:"text",className:"form-control",name:"imgUrl",placeholder:"Link of the image you want to insert",onChange:d,defaultValue:c.imgUrl||""})]}),Object(b.jsxs)("div",{className:"form-group py-3",children:[Object(b.jsxs)("label",{htmlFor:"content",className:"fw-bold py-2",children:["Content ",Object(b.jsx)("span",{className:"text-danger",children:"*"})]}),Object(b.jsx)(U.a,{apiKey:"4oswke2ijzvdik42m9j0cpp7mkzgb0q70ibonmasqg23r35f",init:{height:400,menubar:!1,plugins:["advlist autolink lists link image","charmap print preview anchor help","searchreplace visualblocks code","insertdatetime media table paste wordcount"],toolbar:"undo redo | formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | help"},value:c.content,textareaName:"content",onEditorChange:function(e,t){d(function(e,t){return{target:{name:t.targetElm.name,value:e}}}(e,t))}})]}),Object(b.jsxs)("div",{className:"py-3",children:[Object(b.jsx)("button",{type:"submit",className:"btn btn-dark me-2 fw-bold letter-spacing",disabled:!(c.title&&c.content&&c.author),children:e.editing?"Save":"Post"}),Object(b.jsx)("button",{type:"button",className:"btn btn-outline-secondary fw-bold mx-2",onClick:function(e){e.preventDefault(),o({title:"",content:"",imgUrl:""})},children:"Clear"})]})]})]})})),I=s(61),L=s.n(I);var M=Object(d.f)((function(e){var t,s=Object(a.useState)([]),n=Object(i.a)(s,2),c=n[0],o=n[1],r=Object(a.useState)(!1),l=Object(i.a)(r,2),d=l[0],u=l[1],j=Object(a.useState)(!1),h=Object(i.a)(j,2),m=h[0],p=h[1],f=Object(a.useState)(!1),O=Object(i.a)(f,2),g=O[0],v=O[1],N=Object(a.useState)([]),w=Object(i.a)(N,2),y=w[0],k=w[1];return Object(a.useEffect)((function(){document.title="".concat(e.title," | Blogify")||!1}),[e.title]),Object(a.useEffect)((function(){x.a.get("/api/posts/".concat(e._id,"/likes")).then((function(t){k(t.data),t.data.some((function(t){var s;return t===(null===(s=e.user)||void 0===s?void 0:s._id)}))&&v(!0)}))}),[e.likes,e._id,e.user]),Object(a.useEffect)((function(){x.a.get("/api/posts/".concat(e._id,"/comments")).then((function(e){o(e.data)})).catch((function(e){return console.error(e)}))}),[e._id]),Object(b.jsxs)("div",{className:"my-5 post-bg",children:[Object(b.jsxs)("main",{hidden:!!d,className:"w-75 m-auto bg-white shadow p-4 post",children:[Object(b.jsxs)("section",{className:"d-flex flex-column align-items-center",children:[Object(b.jsxs)("div",{className:"py-3 mt-4 text-center",children:[Object(b.jsx)("h1",{className:"fw-bold",children:e.title}),Object(b.jsxs)("p",{className:"text-secondary",children:["By ",e.author.username," -"," ",S()(e.timestamp).format("lll")]})]}),Object(b.jsxs)("div",{hidden:(null===(t=e.user)||void 0===t?void 0:t._id)!==e.author._id,children:[Object(b.jsxs)("button",{onClick:function(){u(!0)},className:"btn btn-dark fw-bold letter-spacing mx-2",children:[Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pencil-square me-1",viewBox:"0 0 16 17",children:[Object(b.jsx)("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),Object(b.jsx)("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"})]})," ","Edit"]}),Object(b.jsxs)("button",{onClick:function(){x.a.delete("/api/posts/".concat(e._id,"/delete"),{headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("user")).token)}}).then((function(){e.setPosts((function(t){return t.filter((function(t){return t._id!==e._id}))})),e.setShowToast(!0),e.setToastText("Post Deleted Successfully."),e.history.push("/dashboard")})).catch((function(e){console.error(e)}))},className:"btn btn-danger fw-bold letter-spacing mx-2",children:[Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 17",children:[Object(b.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),Object(b.jsx)("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]})," ","Delete"]})]}),Object(b.jsx)("img",{src:e.imgUrl||T,className:"img-fluid py-3 pb-4",alt:"Blog related"})]}),Object(b.jsxs)("section",{className:"py-3 content",children:[L()(e.content),Object(b.jsxs)("button",{className:"like",onClick:function(){g?x.a.put("/api/posts/".concat(e._id,"/dislike"),{user_id:e.user._id},{headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("user")).token)}}).then((function(e){k(e.data),v(!1)})).catch((function(e){console.error(e)})):x.a.put("/api/posts/".concat(e._id,"/like"),{user_id:e.user._id},{headers:{Authorization:"Bearer ".concat(JSON.parse(localStorage.getItem("user")).token)}}).then((function(e){k(e.data),v(!0)})).catch((function(e){console.error(e)}))},hidden:!e.user,children:[Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",className:g?"bi bi-heart liked":"bi bi-heart",viewBox:"0 0 16 14",children:Object(b.jsx)("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"})}),Object(b.jsx)("span",{className:"px-2",children:y.length})]})]}),Object(b.jsxs)("section",{children:[Object(b.jsxs)("p",{className:"fw-bold",children:["Comments (",c?c.length:0,")"]}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"pb-3",hidden:!!m,children:Object(b.jsx)(z,{user:e.user,setComments:o,id:e._id,setShowToast:e.setShowToast,setToastText:e.setToastText})}),c.map((function(t){return Object(b.jsx)("div",{children:Object(b.jsx)(B,{comment:t,comments:c,postId:e._id,setComments:o,user:e.user,setCommentEdit:p,setShowToast:e.setShowToast,setToastText:e.setToastText})},t._id)}))]})]}),d?Object(b.jsx)(A,{title:e.title,content:e.content,comments:e.comments,published:e.published,editing:!0,id:e._id,setPosts:e.setPosts,setEditing:u,user:e.user,setShowToast:e.setShowToast,setToastText:e.setToastText}):null]})})),V=s.p+"static/media/illustration.cc8148da.png";var H=function(e){var t=Object(a.useState)([]),s=Object(i.a)(t,2),n=s[0],c=s[1];return Object(a.useEffect)((function(){c((function(){return e.posts.filter((function(e){return e.published}))})),document.title=e.title||"Home | Blogify"}),[e]),Object(b.jsxs)("main",{className:"py-5",children:[Object(b.jsxs)("section",{className:"p-3 pt-5 d-flex justify-content-center align-items-center",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:"display-2 fw-bold",children:"Blogify"}),Object(b.jsx)("p",{children:"Welcome to the home of tech writers, where experts from the tech field share their insights on modern technology. Blogify will help you stay up-to-date with the latest developments in the tech field so you can always stay ahead of the curve."}),Object(b.jsxs)(l.b,{exact:"true",to:"/signup",className:"btn btn-dark",hidden:!!e.user,children:[Object(b.jsx)("span",{className:"lead fw-bold letter-spacing",children:"Get Started "}),Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-arrow-right",viewBox:"0 0 16 16",children:Object(b.jsx)("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"})})]})]}),Object(b.jsx)("img",{src:V,className:"w-50 p-3 d-none d-md-block ",alt:"Illustration"})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("h4",{className:"fw-bold p-3",children:["Posts (",n.length,")"]}),Object(b.jsx)("section",{className:"row p-3 pt-1 w-100",children:n.map((function(e){return Object(b.jsx)("div",{className:"col-12 col-md-4 p-3 px-3",children:Object(b.jsx)(k,Object(r.a)({},e))},e._id)}))})]})};var D=function(e){return Object(b.jsx)("div",{className:"position-fixed bottom-0 start-0 p-2 m-4 bg-dark shadow rounded",hidden:!e.showToast,children:Object(b.jsxs)("div",{className:"notification d-flex",role:"alert","aria-live":"assertive","aria-atomic":"true",children:[Object(b.jsx)("div",{className:"d-flex flex-column",children:Object(b.jsxs)("div",{className:"text-center p-2 text-white letter-spacing",children:[Object(b.jsx)("img",{src:u,alt:"",className:"logo pe-2"}),e.toastText]})}),Object(b.jsx)("button",{type:"button",className:"btn-close btn-close-white me-2 m-auto","aria-label":"Close",onClick:function(){e.setShowToast(!1)}})]})})};var J=function(){return Object(b.jsx)("footer",{className:"position-fixed end-0 bottom-0 m-4 bg-white rounded-circle",children:Object(b.jsx)("a",{className:"text-dark text-decoration-none",href:"https://github.com/Ajinkyap22/MERN-blog",target:"_blank",rel:"noreferrer noopener",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"currentColor",className:"bi bi-github github",viewBox:"0 0 16 16",children:Object(b.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})})})})},q=function(e){return Object(b.jsx)("div",{className:"spinner-border text-primary",hidden:!e.loading,role:"status",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})};var F=function(){var e=Object(a.useState)(void 0),t=Object(i.a)(e,2),s=t[0],n=t[1],c=Object(a.useState)([]),o=Object(i.a)(c,2),u=o[0],h=o[1],m=Object(a.useState)(!1),p=Object(i.a)(m,2),f=p[0],O=p[1],g=Object(a.useState)(""),v=Object(i.a)(g,2),y=v[0],S=v[1],T=Object(a.useState)(!0),k=Object(i.a)(T,2),C=k[0],B=k[1];return Object(a.useEffect)((function(){x.a.get("/api/posts").then((function(e){h(e.data),B(!1)}))}),[]),Object(a.useEffect)((function(){f&&setTimeout((function(){return O(!1)}),3e3)}),[f]),Object(b.jsxs)("div",{className:"App h-100",children:[Object(b.jsx)(q,{loading:C}),Object(b.jsx)("div",{hidden:!!C,children:Object(b.jsxs)(l.a,{children:[Object(b.jsx)("header",{children:Object(b.jsx)(j,{user:s,setUser:n})}),Object(b.jsxs)(d.c,{children:[Object(b.jsx)(d.a,{exact:!0,path:"/",render:function(){return Object(b.jsx)(H,{posts:u,user:s,title:"Home | Blogify"})}}),Object(b.jsx)(d.a,{exact:!0,path:"/login",render:function(){return Object(b.jsx)(N,{setUser:n,title:"Login | Blogify"})}}),Object(b.jsx)(d.a,{exact:!0,path:"/signup",render:function(){return Object(b.jsx)(w,{setUser:n,title:"Sign up | Blogify"})}}),Object(b.jsx)(d.a,{exact:!0,path:"/dashboard",render:function(){return Object(b.jsx)(_,{user:s,posts:u,setPosts:h,setShowToast:O,setToastText:S,title:"Dashboard | Blogify"})}}),Object(b.jsx)(d.a,{exact:!0,path:"/create",render:function(){return Object(b.jsx)(A,{user:s,posts:u,setPosts:h,setShowToast:O,setToastText:S})}}),u.map((function(e){return Object(b.jsx)(d.a,{exact:!0,path:"/posts/".concat(e._id),render:function(){return Object(b.jsx)(M,Object(r.a)(Object(r.a)({},e),{},{user:s,posts:u,setPosts:h,setShowToast:O,setToastText:S}))}},e._id)}))]})]})}),Object(b.jsx)(D,{showToast:f,setShowToast:O,toastText:y}),Object(b.jsx)(J,{})]})};s(137);o.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(F,{})}),document.getElementById("root"))},67:function(e,t,s){}},[[138,1,2]]]);
//# sourceMappingURL=main.d8606771.chunk.js.map